<div class="container mt-4">
  <div *ngIf="mensagemErro" class="alert alert-danger mb-3">{{ mensagemErro }}</div>
  <h4>Lista de Serviços</h4>
  <div class="d-flex justify-content-end mb-2">
    <button class="btn btn-success d-flex align-items-center" (click)="mostrarModalCadastro = true">
      <span>Cadastrar Serviço</span>
  <i class="bi bi-plus-circle ms-1"></i>
    </button>
  </div>
  <div class="table-responsive">
<!-- Modal de cadastro -->
<div class="modal show d-block" tabindex="-1" role="dialog" *ngIf="mostrarModalCadastro">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cadastrar Serviço</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="mostrarModalCadastro = false"></button>
      </div>
      <div class="modal-body">
        <form #formCadastro="ngForm">
          <div class="mb-3">
            <label for="cadastroNome" class="form-label">Descrição</label>
            <input id="cadastroNome" class="form-control" [(ngModel)]="cadastroNome" name="cadastroNome" required>
          </div>
          <div class="mb-3">
            <label for="cadastroValor" class="form-label">Preço</label>
            <input id="cadastroValor" type="number" min="0" step="0.01" class="form-control" [(ngModel)]="cadastroValor" name="cadastroValor" required>
          </div>
          <div *ngIf="mensagemErroCadastro" class="alert alert-danger">{{ mensagemErroCadastro }}</div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="mostrarModalCadastro = false">Cancelar</button>
        <button type="button" class="btn btn-success" [disabled]="!cadastroNome || cadastroValor == null" (click)="onCadastrarServico()">Cadastrar</button>
      </div>
    </div>
  </div>
</div>
    <table class="table table-bordered table-striped table-hover">
      <thead class="table-dark">
        <tr>
          <th>Descrição</th>
          <th>Preço</th>
          <th style="background-color: #212529; color: #fff;">Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let servico of servicos">
          <td>{{ servico.nome }}</td>
          <td>{{ servico.valor | currency:'BRL' }}</td>
          <td>
            <div class="d-flex gap-2">
              <button class="btn btn-sm btn-warning d-flex align-items-center" (click)="abrirModalEditar(servico)">
                <span>Editar</span>
                <i class="bi bi-pencil ms-1"></i>
              </button>
              <button class="btn btn-sm btn-danger d-flex align-items-center" (click)="excluirServico(servico.idServico)">
                <span>Excluir</span>
                <i class="bi bi-trash ms-1"></i>
              </button>
            </div>
          </td>
        </tr>
<!-- Modal de edição -->
<div class="modal show d-block" tabindex="-1" role="dialog" *ngIf="servicoEditando">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Serviço</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="fecharModalEditar()"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="novoNome" class="form-label">Descrição</label>
            <input id="novoNome" class="form-control" [(ngModel)]="novoNome" name="novoNome">
          </div>
          <div class="mb-3">
            <label for="novoValor" class="form-label">Preço</label>
            <input id="novoValor" type="number" min="0" step="0.01" class="form-control" [(ngModel)]="novoValor" name="novoValor">
          </div>
          <div *ngIf="mensagemErro" class="alert alert-danger">{{ mensagemErro }}</div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="fecharModalEditar()">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="salvarEdicao()">Salvar</button>
      </div>
    </div>
  </div>
</div>
      </tbody>
    </table>
  </div>
  <!-- mensagemErro agora aparece no topo -->
  <div *ngIf="!servicos.length" class="alert alert-warning mt-3">Nenhum serviço cadastrado.</div>
</div>
